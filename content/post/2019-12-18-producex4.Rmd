---
title: 텍스트 분석을 통한 프로듀스X101 데뷔조 예측3 [EDA]
author: JDW
date: '2019-12-18'
slug: produce4
categories:
  - 데이터분석
tags:
  - R
---
```{r, message=FALSE, include=FALSE}
library(tidyverse)
library(lubridate)
library(data.table)
library(knitr)
library(gtools)

dir <- 'C:/Users/JDW/Desktop/my_cloud/OneDrive/R/producex/data'
filelist <- list.files(dir)
filelist <- mixedsort(filelist, decreasing = T)
pxdata <- data.frame()
temp <- NULL

for(file in filelist){
    if(str_sub(file, -3, -1) == 'csv'){
        temp <- fread(paste(dir, file, sep = '/'), header = T, stringsAsFactors = F)
        temp <- temp %>% select(p_title, p_time)
        pxdata <- rbind(pxdata, temp)
        
        rm(temp)
    }else{
        next
    }

}

pxdata <- pxdata %>% mutate(p_ymd = as.Date(p_time), 
                            p_wday = lubridate::wday(as.Date(p_time), label = T),
                            p_weeknum = week(as.Date(p_time) - 5) - 17
                            )
```

# EDA 

본격적인 분석에 앞서 이전 파트에서 전처리한 데이터들을 기반으로 간단한 EDA를 진행해 볼까 합니다. 

시각화적 EDA를 통해 지금 가지고있는 데이터의 특성을 파악하고, 특별히 주목해야할 정보가 있는지를 한번 살펴 보겠습니다. 

<br>

먼저 앞장에서 다루었던 전처리한 데이터 입니다. 


### dataset 

```{r, message=FALSE}
dt1 <- DT::datatable(head(pxdata, 10))
widgetframe::frameWidget(dt1)
```

<br>

### 회차별 게시글 수 비교 

```{r, message = FALSE}
pxdata %>% group_by(p_weeknum) %>%
    count() 
```

```{r, echo = FALSE, out.width="1000px"}
pxdata %>% group_by(p_weeknum) %>% summarise(n = n()) %>%
    ggplot(aes(x = as.factor(p_weeknum), y = n)) + geom_col() + 
    geom_text(aes(label = n), vjust = -1) + 
    labs(x = 'episod', y = 'post')
```

<br>

그래프의 x축은 방송 회차 기간을 의미하고, y축은 작성글 수를 의미합니다. <br>

방송이 진행될수록 국민프로듀서(시청자) 들의 작성글 수는 증가하는 면모를 보이네요.  

<br>

### 요일별 게시글 수 비교 

```{r}
pxdata %>% group_by(p_wday) %>%
    count() 
```

```{r, echo = FALSE, out.width="1000px"}
pxdata %>% group_by(p_wday) %>% summarise(n = n()) %>%
    ggplot(aes(x = as.factor(p_wday), y = n)) + geom_col() + 
    geom_text(aes(label = n), vjust = -1) + 
    labs(x = 'day', y = 'post')
```

<br>

방송이 방영되던 금요일과, 방송이 끝난 당일인 토요일에 작성된 글 수가 많은 것을 확인할 수 있습니다. 

<br> 

### 일자별 게시글 수 비교 

```{r, out.width="1000px"}
pxdata %>% 
    group_by(p_ymd) %>% 
    count() %>% 
    mutate(p_wday = lubridate::wday(p_ymd, label = T), p_md = str_sub(p_ymd, 6, 10)) %>%
    ggplot(aes(x = as.factor(p_md), y = n)) + 
    geom_col(aes(fill = p_wday)) +
    theme(axis.text.x = element_text(angle = 45, size = 7))  + 
    labs(x = 'ymd', y = 'post', fill = "")
```


```{r, out.width="1000px"}
pxdata %>% 
    group_by(p_ymd) %>% 
    count() %>% 
    mutate(p_wday = lubridate::wday(p_ymd, label = T), p_md = str_sub(p_ymd, 6, 10)) %>%
    ggplot(aes(x = reorder(as.factor(p_md), -n), y = n)) + 
    geom_col(aes(fill = p_wday)) +
    theme(axis.text.x = element_text(angle = 45, size = 7))  + 
    labs(x = 'ymd', y = 'post', fill = "")

```


```{r, out.width="1000px"}
pxdata %>% 
    group_by(p_ymd) %>% 
    count() %>% 
    mutate(p_wday = lubridate::wday(p_ymd, label = T), p_md = str_sub(p_ymd, 6, 10)) %>%
    ggplot(aes(x = as.factor(p_md), y = n)) + 
    geom_col() +
    geom_text(aes(label = n), vjust = -1, size = 2) + 
    theme(axis.text.x = element_text(size = 0))  + 
    facet_wrap(~ p_wday) + 
    labs(x = 'ymd', y = 'post')
```


<br>

일자별로 나누어 보았을 경우에도 금요일과 토요일에 사람들의 프로그램에 대한 관심도가 높은것을 확인할 수 있습니다.


EDA는 여기서 마무리 짓고 다음장에서 본격적으로 어느 연습생의 인기가 많았는지를 분석을 통해 도출해 보도록 하겠습니다. 
























